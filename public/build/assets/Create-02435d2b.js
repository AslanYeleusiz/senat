import{A as C}from"./AdminLayout-f20c5b94.js";import{L,H as M,b as h,O as S,o as a,c as d,g as r,w as j,G as f,e,I as b,f as c,K as p,J as x,E as g,B as v,D as y,i as l}from"./app-df21bdc9.js";import{P as A}from"./Pagination-1036cda7.js";import{V as D}from"./ValidationError-8bcdd75a.js";import{s as E}from"./searchUser-56cbf20e.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-c37a058e.js";const B={components:{AdminLayout:C,Link:L,Pagination:A,ValidationError:D,searchUser:E,Head:M},data(){return{project:{name:null,project_type:null,country:null,audan_id:null,invest_sum:null,people_count:null,description:null,phone:null,curator:null,file:null,images:[]},moneyConfig:{precision:0,prefix:"",suffix:" ₸",thousands:" ",decimal:",",disableNegative:!0,disableRound:!1},form:{files:[],previews:[]},material:{file:""}}},props:["audans","projectTypes"],methods:{submit(){this.material.file&&(console.log(this.material.file),this.project.file=this.material.file),this.form.files.length&&(this.project.images=this.form.files,console.log(this.project.images)),this.$inertia.post(route("admin.projects.store"),this.project,{onError:()=>console.log("An error has occurred"),onSuccess:()=>console.log("The new contact has been saved")})},handleMaterialUpload(){this.material.file=this.$refs.material.files[0],console.log(this.material.file),this.material.file?this.$refs.material.value="":(this.project.file="",this.material.file="")},handleUserSelection(i){console.log("Выбран пользователь:",i),this.project.curator_id=i.id,this.project.phone=i.phone,this.project.curator=i.fio},handleImageUpload(i){Array.from(i.target.files).forEach(u=>{this.form.files.push(u);const _=new FileReader;_.onload=t=>{this.form.previews.push(t.target.result)},_.readAsDataURL(u)}),this.$refs.image.value=""}}},I=e("head",null,[e("title",null,"Админ панель | Жоба қосу")],-1),T={class:"modal fade",id:"filterModal",tabindex:"-1","aria-labelledby":"filterModalLabel","aria-hidden":"true"},P={class:"modal-dialog"},R={class:"modal-content"},z=e("div",{class:"modal-header bg-secondary"},[e("h5",{class:"modal-title",id:"filterModalLabel"},"Қолданушы іздеу"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Жабу"})],-1),F={class:"modal-body"},H=e("label",{class:"form-label"},"Іздеу:",-1),G={class:"row mb-2"},J=e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"Жоба қосу")],-1),K={class:"col-sm-6"},O={class:"breadcrumb float-sm-right"},q={class:"breadcrumb-item"},Q=["href"],W=e("i",{class:"fas fa-dashboard"},null,-1),X=l(" Басты бет "),Y=[W,X],Z={class:"breadcrumb-item"},$=["href"],ee=e("i",{class:"fas fa-dashboard"},null,-1),oe=l(" Жоба тізімі "),se=[ee,oe],te=e("li",{class:"breadcrumb-item active"}," Жоба қосу ",-1),le={class:"container-fluid"},ie={class:"card card-primary"},re={class:"card-body"},ne={class:"form-group"},ae=e("label",{for:""},[l("Жоба аты "),e("span",{class:"text-danger"},"*")],-1),de={class:"form-group"},ce=e("label",{for:""},[l("Жоба түрі "),e("span",{class:"text-danger"},"*")],-1),pe=e("option",{hidden:"",value:null}," Жоба түрін таңдаңыз ",-1),me=["value"],ue={class:"form-group"},fe=e("label",{for:""},[l("Сипаттама "),e("span",{class:"text-danger"},"*")],-1),_e={class:"form-group"},he=e("label",{for:""},[l("Елі "),e("span",{class:"text-danger"},"*")],-1),be={class:"form-group"},ge=e("label",{for:""},[l("Аудан "),e("span",{class:"text-danger"},"*")],-1),ve=e("option",{hidden:"",value:null}," Ауданды таңдаңыз ",-1),ye=["value"],je={class:"form-group"},xe=e("label",{for:""},[l("Инвестиция суммасы (₸) "),e("span",{class:"text-danger"},"*")],-1),Ue={class:"form-group"},Ve=e("label",{for:""},[l("Жұмыскерлер саны "),e("span",{class:"text-danger"},"*")],-1),we=e("div",{class:"h4"},"Куратор",-1),ke=e("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#filterModal"},[e("i",{class:"fa fa-plus"}),l(" Куратор таңдау ")],-1),Ce={class:"form-group"},Le=e("label",{for:""},[l("Куратор аты-жөні "),e("span",{class:"text-danger"},"*")],-1),Me={class:"form-group"},Se=e("label",{for:""},[l("Куратор байланыс номері "),e("span",{class:"text-danger"},"*")],-1),Ae={class:"mb-4 mt-4"},De=e("label",{for:"material",class:"form-label"},[l("Документ "),e("span",{class:"text-danger"},"*")],-1),Ee={class:"border rounded p-3 bg-light d-flex flex-column gap-2"},Ne={key:0,class:"text-success d-flex align-items-center gap-2"},Be=e("i",{class:"fas fa-file-alt fs-5"},null,-1),Ie={class:"input-group"},Te={class:"mb-4"},Pe=e("label",{for:"material",class:"form-label"},"Суреттер",-1),Re={class:"border rounded p-3 bg-light d-flex flex-column gap-2"},ze=["src"],Fe=e("label",{for:"adding",class:"d-inline-flex justify-content-center align-items-center border border-dashed text-center py-5",style:{width:"100px",cursor:"pointer"}},[e("div",null,[e("i",{class:"fas fa-plus",style:{"font-size":"1.2rem",display:"block"}}),e("span",{style:{"font-size":"0.9rem"}},"Қосу")])],-1),He={class:"card-footer"},Ge=e("button",{type:"submit",class:"btn btn-primary mr-1"}," Сақтау ",-1);function Je(i,s,u,_,t,m){const U=h("searchUser"),n=h("validation-error"),V=h("AdminLayout"),w=S("money3");return a(),d(f,null,[I,r(V,null,{breadcrumbs:j(()=>[e("div",G,[J,e("div",K,[e("ol",O,[e("li",q,[e("a",{href:i.route("admin.index")},Y,8,Q)]),e("li",Z,[e("a",{href:i.route("admin.projects.index")},se,8,$)]),te])])])]),default:j(()=>[e("div",T,[e("div",P,[e("div",R,[z,e("div",F,[H,r(U,{onSelectUser:m.handleUserSelection,close:"true"},null,8,["onSelectUser"])])])])]),e("div",le,[e("div",ie,[e("form",{method:"post",onSubmit:s[13]||(s[13]=b((...o)=>m.submit&&m.submit(...o),["prevent"]))},[e("div",re,[e("div",ne,[ae,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>t.project.name=o),name:"name",placeholder:"Жоба атын енгізініз"},null,512),[[p,t.project.name]]),r(n,{field:"name"})]),e("div",de,[ce,c(e("select",{class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>t.project.project_type=o),placeholder:"Жоба түрін таңдаңыз"},[pe,(a(!0),d(f,null,g(u.projectTypes,o=>(a(),d("option",{value:o.id},v(o.name),9,me))),256))],512),[[x,t.project.project_type]]),r(n,{field:"project_type"})]),e("div",ue,[fe,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>t.project.description=o),name:"description",placeholder:"Сипаттама"},null,512),[[p,t.project.description]]),r(n,{field:"description"})]),e("div",_e,[he,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=o=>t.project.country=o),name:"country",placeholder:"Елі"},null,512),[[p,t.project.country]]),r(n,{field:"country"})]),e("div",be,[ge,c(e("select",{class:"form-control",onChange:s[4]||(s[4]=b((...o)=>i.search&&i.search(...o),["prevent"])),"onUpdate:modelValue":s[5]||(s[5]=o=>t.project.audan_id=o),placeholder:"Ауданды таңдаңыз"},[ve,(a(!0),d(f,null,g(u.audans,o=>(a(),d("option",{value:o.id},v(o.name),9,ye))),256))],544),[[x,t.project.audan_id]]),r(n,{field:"audan_id"})]),e("div",je,[xe,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>t.project.invest_sum=o),name:"invest_sum",placeholder:"Инвестиция суммасы"},null,512),[[p,t.project.invest_sum],[w,t.moneyConfig]]),r(n,{field:"invest_sum"})]),e("div",Ue,[Ve,c(e("input",{type:"number",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=o=>t.project.people_count=o),name:"people_count",placeholder:"Инвестиция суммасы"},null,512),[[p,t.project.people_count]]),r(n,{field:"people_count"})]),we,ke,r(n,{field:"curator_id"}),t.project.curator_id?(a(),d(f,{key:0},[e("div",Ce,[Le,c(e("input",{type:"text",class:"form-control border-success","onUpdate:modelValue":s[8]||(s[8]=o=>t.project.curator=o),name:"curator",placeholder:"Куратор аты-жөні",disabled:""},null,512),[[p,t.project.curator]])]),e("div",Me,[Se,c(e("input",{type:"text",class:"form-control border-success","onUpdate:modelValue":s[9]||(s[9]=o=>t.project.phone=o),name:"phone",placeholder:"Байланыс номері",disabled:""},null,512),[[p,t.project.phone]])])],64)):y("",!0),e("div",Ae,[De,e("div",Ee,[t.material.file?(a(),d("div",Ne,[Be,e("span",null,v(t.material.file.name),1)])):y("",!0),e("div",Ie,[e("input",{type:"file",class:"form-control",id:"material",name:"material",onChange:s[10]||(s[10]=o=>m.handleMaterialUpload()),ref:"material"},null,544)]),r(n,{field:"file"})])]),e("div",Te,[Pe,e("div",Re,[e("input",{id:"adding",class:"form-control",type:"file",multiple:"",ref:"image",onChange:s[11]||(s[11]=(...o)=>m.handleImageUpload&&m.handleImageUpload(...o)),accept:"image/*",hidden:""},null,544),e("div",null,[t.form.previews.length?(a(!0),d(f,{key:0},g(t.form.previews,(o,k)=>(a(),d("div",{key:k,style:{display:"inline-block",margin:"10px"}},[e("img",{src:o,alt:"Preview",style:{width:"200px"}},null,8,ze)]))),128)):y("",!0),Fe]),r(n,{field:"images"})])])]),e("div",He,[Ge,e("button",{type:"button",class:"btn btn-danger",onClick:s[12]||(s[12]=b(o=>i.back(),["prevent"]))}," Артқа ")])],32)])])]),_:1})],64)}const Ze=N(B,[["render",Je]]);export{Ze as default};
