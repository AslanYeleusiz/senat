import{b as h,o as l,c as i,e as s,B as c,D as d,f as u,K as _,G as p,E as y,M as C,d as b}from"./app-df21bdc9.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";const g={props:{comment:Object,allComments:Array,is_done:Number,highlightedId:Number},data(){return{showReply:!1,replyText:"",showChildren:!0}},computed:{childComments(){return this.allComments.filter(e=>e.comment_id===this.comment.id)}},mounted(){this.activeComment()},methods:{activeComment(){this.$nextTick(()=>{const e=document.getElementById(`comment-${this.highlightedId}`);e&&(e.classList.add("highlight-comment"),setTimeout(()=>{e.classList.remove("highlight-comment")},1e3))})},formatDate(e){return new Date(e).toLocaleString("ru-RU")},submitReply(){axios.post(`/admin/forums/${this.comment.forum_id}/commentstore`,{comment:this.replyText,comment_id:this.comment.id,author_id:this.comment.user.id}).then(e=>{this.allComments.unshift(e.data.forumComment),this.replyText="",this.showReply=!1,this.showChildren=!0})}}},v={class:"comment-box"},x=["id"],w={class:"card-body py-2 px-3"},k={class:"text-muted small mb-2 d-flex align-items-center gap-2"},R=["src"],T={class:"mb-1"},N={class:"d-flex flex-wrap gap-2 align-items-center"},B={key:0,class:"mt-2"},D=["disabled"],I={key:0,class:"mt-2"};function L(e,m,o,E,t,r){const a=h("CommentNode",!0);return l(),i("div",{class:C(["comment-wrapper",{"has-parent":!!o.comment.comment_id}])},[s("div",v,[s("div",{class:"card custom",id:"comment-"+o.comment.id},[s("div",w,[s("div",k,[s("img",{class:"avatar",src:e.route("index")+"/storage/"+o.comment.user.avatar,alt:"Аватар"},null,8,R),s("span",null,c(o.comment.user.fio)+" · "+c(o.comment.created_at_human),1)]),s("p",T,c(o.comment.comment),1),s("div",N,[o.comment.is_done?d("",!0):(l(),i("button",{key:0,class:"btn btn-link btn-sm p-0 me-3",onClick:m[0]||(m[0]=n=>t.showReply=!t.showReply)}," Жауап беру ")),r.childComments.length?(l(),i("button",{key:1,class:"btn btn-link btn-sm p-0",onClick:m[1]||(m[1]=n=>t.showChildren=!t.showChildren)},c(t.showChildren?"Жауаптарды жасыру":"Жауаптарды ашу ("+r.childComments.length+")"),1)):d("",!0)]),t.showReply?(l(),i("div",B,[u(s("textarea",{"onUpdate:modelValue":m[2]||(m[2]=n=>t.replyText=n),rows:"3",class:"form-control mb-2",placeholder:"Жауап жазыңыз..."},null,512),[[_,t.replyText]]),s("button",{class:"btn btn-sm btn-primary",disabled:!t.replyText.trim(),onClick:m[3]||(m[3]=(...n)=>r.submitReply&&r.submitReply(...n))}," Жауап қайтару ",8,D)])):d("",!0)])],8,x)]),t.showChildren?(l(),i("div",I,[(l(!0),i(p,null,y(r.childComments,n=>(l(),b(a,{key:n.id,comment:n,"all-comments":o.allComments},null,8,["comment","all-comments"]))),128))])):d("",!0)],2)}const S=f(g,[["render",L],["__scopeId","data-v-d0107130"]]);export{S as default};
