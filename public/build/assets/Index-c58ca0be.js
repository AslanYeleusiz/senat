import{A as j}from"./AdminLayout-1d3700ae.js";import{L as B,H as F,b,o as l,c as i,g as u,w as d,F as m,e as t,C as v,D as f,i as o,A as n,G as g,f as p,J as M,I as x,E as S,K as k}from"./app-b9f46dc5.js";import{P as V}from"./Pagination-e77d07ce.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-c37a058e.js";const P={components:{AdminLayout:j,Link:B,Pagination:V,Head:F},props:["projects","audans","projectTypes"],data(){return{filter:{country:route().params.country?route().params.country:null,audan_id:route().params.audan_id?route().params.audan_id:null,project_type:route().params.project_type?route().params.project_type:null},loading:0}},methods:{deleteData(e,a){Swal.fire({title:a?"Архивтен қайтаруға сенімдісіз бе?":"Архивке салуға сенімдісіз бе?",text:a?"":"Архивтағы жобалар басқалар қолданушыларға көрінбейді!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Иә",cancelButtonText:"Жоқ"}).then(c=>{c.isConfirmed&&this.$inertia.delete(route("admin.projects.destroy",e))})},removeFilter(e){this.filter[e]=null,this.search()},search(){this.loading=1;const e=this.clearParams(this.filter);this.$inertia.get(route("admin.projects.index"),e)}},computed:{activeFilters(){const e=[];return this.filter.country&&e.push({key:"country",value:this.filter.country}),this.filter.audan_id&&e.push({key:"audan_id",value:this.filter.audan_id}),this.filter.project_type&&e.push({key:"project_type",label:"Жоба түрі ID",value:this.filter.project_type}),e}}},A=t("head",null,[t("title",null,"Админ панель | Жобалар")],-1),T={class:"row mb-2"},I=t("div",{class:"col-sm-6"},[t("h2",{class:"fw-bold text-dark mb-0"},[t("i",{class:"fas fa-briefcase text-primary me-2"}),o(" Жобалар тізімі ")])],-1),N={class:"col-sm-6"},z={class:"breadcrumb float-sm-right"},U={class:"breadcrumb-item"},E=["href"],H=t("i",{class:"fas fa-dashboard"},null,-1),G=o(" Басты бет "),J=[H,G],K=t("li",{class:"breadcrumb-item active"}," Жобалар тізімі ",-1),q={class:"buttons d-flex align-items-center"},O=t("i",{class:"fa fa-plus"},null,-1),Q=o(" Қосу "),R=t("button",{type:"button",class:"btn btn-secondary mr-2","data-bs-toggle":"modal","data-bs-target":"#filterModal"},[t("i",{class:"fa fa-filter"}),o(" Фильтр ")],-1),W=t("i",{class:"fa fa-trash"},null,-1),X=o(" Фильтрді тазалау "),Y={key:0,class:"spinner-border text-primary mx-3",role:"status"},Z=t("span",{class:"sr-only"},"Loading...",-1),$=[Z],tt={key:0,class:"mt-2 d-flex flex-wrap align-items-center"},st=t("span",{class:"me-2"},"Қолданылған фильтрлер:",-1),et=["onClick"],ot={class:"modal fade",id:"filterModal",tabindex:"-1","aria-labelledby":"filterModalLabel","aria-hidden":"true"},at={class:"modal-dialog"},lt={class:"modal-content"},it=t("div",{class:"modal-header bg-secondary"},[t("h5",{class:"modal-title",id:"filterModalLabel"},"Фильтр"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Жабу"})],-1),nt={class:"modal-body pb-4"},rt={class:"form-group"},dt=t("label",{for:"project",class:"form-label"},"Ел арқылы іздеу",-1),ct={class:"form-group"},_t=t("label",{for:"project",class:"form-label"},"Аудан арқыды іздеу",-1),ut=t("option",{hidden:"",value:null},"Аудан таңдаңыз",-1),mt=["value"],ht={class:"form-group"},ft=t("label",{for:"project",class:"form-label"},"Жоба түрі арқыды іздеу",-1),bt=t("option",{hidden:"",value:null},"Жоба түрін таңдаңыз",-1),pt=["value"],yt=t("button",{type:"submit",class:"btn w-100 btn-primary","data-bs-dismiss":"modal"},[t("i",{class:"fas fa-search"}),o(" Іздеу")],-1),vt={class:"container-fluid"},gt={class:"row"},xt={class:"card border-0 shadow"},kt={class:"card-body p-3"},wt={class:"list-unstyled mb-3"},Ct={class:"mb-2"},Lt=t("i",{class:"fas fa-project-diagram text-primary me-2"},null,-1),jt=t("strong",null,"Жоба аты:",-1),Bt={class:"mb-2"},Ft=t("i",{class:"fas fa-flag text-success me-2"},null,-1),Mt=t("strong",null,"Елі:",-1),St={class:"mb-2"},Vt=t("i",{class:"fas fa-map-marker-alt text-danger me-2"},null,-1),Dt=t("strong",null,"Аудан:",-1),Pt={class:"mb-2"},At=t("i",{class:"fas fa-layer-group text-info me-2"},null,-1),Tt=t("strong",null,"Жоба түрі:",-1),It={class:"mb-2"},Nt=t("i",{class:"fas fa-dollar-sign text-warning me-2"},null,-1),zt=t("strong",null,"Суммасы:",-1),Ut={class:"mb-2"},Et=t("i",{class:"fas fa-user-tie text-secondary me-2"},null,-1),Ht=t("strong",null,"Куратор:",-1),Gt={class:"d-flex justify-content-between align-items-center flex-wrap gap-2 py-2 border-top mt-3 pt-3"},Jt=t("div",null,[t("span",{class:"text-muted"},[t("i",{class:"fas fa-info-circle me-1"}),o("Жоба әрекеттері")])],-1),Kt={class:"d-flex flex-wrap gap-2"},qt=t("i",{class:"fas fa-eye me-1"},null,-1),Ot=o(" Жобаны көру "),Qt=t("i",{class:"fas fa-pencil-alt me-1"},null,-1),Rt=o(" Өзгерту "),Wt=["onClick","title"],Xt={class:"px-3 py-2"};function Yt(e,a,c,Zt,r,_){const h=b("Link"),w=b("Pagination"),C=b("AdminLayout");return l(),i(m,null,[A,u(C,null,{breadcrumbs:d(()=>[t("div",T,[I,t("div",N,[t("ol",z,[t("li",U,[t("a",{href:e.route("admin.index")},J,8,E)]),K])])])]),header:d(()=>[t("div",q,[u(h,{class:"btn btn-primary mr-2",href:e.route("admin.projects.create")},{default:d(()=>[O,Q]),_:1},8,["href"]),R,u(h,{class:"btn btn-danger",href:e.route("admin.projects.index")},{default:d(()=>[W,X]),_:1},8,["href"]),r.loading?(l(),i("div",Y,$)):v("",!0)]),_.activeFilters.length?(l(),i("div",tt,[st,(l(!0),i(m,null,f(_.activeFilters,(s,y)=>(l(),i("span",{key:y,class:"badge bg-info text-dark me-2 d-flex align-items-center"},[o(n(s.label)+": "+n(s.value)+" ",1),t("button",{type:"button",class:"btn-close btn-close-white btn-sm ms-2",onClick:L=>_.removeFilter(s.key),"aria-label":"Жою"},null,8,et)]))),128))])):v("",!0),t("div",ot,[t("div",at,[t("div",lt,[it,t("div",nt,[t("form",{onSubmit:a[3]||(a[3]=g((...s)=>_.search&&_.search(...s),["prevent"]))},[t("div",rt,[dt,p(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.filter.country=s),type:"text",class:"form-control",placeholder:"Елі"},null,512),[[M,r.filter.country]])]),t("div",ct,[_t,p(t("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>r.filter.audan_id=s),class:"form-select"},[ut,(l(!0),i(m,null,f(c.audans,s=>(l(),i("option",{key:s.id,value:s.id},n(s.name),9,mt))),128))],512),[[x,r.filter.audan_id]])]),t("div",ht,[ft,p(t("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>r.filter.project_type=s),class:"form-select"},[bt,(l(!0),i(m,null,f(c.projectTypes,s=>(l(),i("option",{value:s.id},n(s.name),9,pt))),256))],512),[[x,r.filter.project_type]])]),yt],32)])])])])]),default:d(()=>[t("div",vt,[t("div",gt,[(l(!0),i(m,null,f(c.projects.data,(s,y)=>(l(),i("div",{class:"col-xl-4 col-lg-6",key:"project"+s.id},[t("div",xt,[t("div",{class:"card-img-top",style:S({backgroundImage:`url(${e.route("index")}/storage/images/${s.images[0]})`,backgroundPosition:"50% 10%",backgroundSize:"cover",width:"100%",height:"250px"}),alt:"..."},null,4),t("div",kt,[t("ul",wt,[t("li",Ct,[Lt,jt,o(" "+n(s.name),1)]),t("li",Bt,[Ft,Mt,o(" "+n(s.country),1)]),t("li",St,[Vt,Dt,o(" "+n(s.audan.name),1)]),t("li",Pt,[At,Tt,o(" "+n(s.project_type.name),1)]),t("li",It,[Nt,zt,o(" "+n(s.invest_sum.toLocaleString())+" ₸ ",1)]),t("li",Ut,[Et,Ht,o(" "+n(s.curator),1)])]),t("div",Gt,[Jt,t("div",Kt,[u(h,{href:e.route("admin.projects.show",s),class:"btn btn-sm btn-outline-info",title:"Жобаны көру"},{default:d(()=>[qt,Ot]),_:2},1032,["href"]),u(h,{href:e.route("admin.projects.edit",s),class:"btn btn-sm btn-outline-primary",title:"Өзгерту"},{default:d(()=>[Qt,Rt]),_:2},1032,["href"]),t("button",{onClick:g(L=>_.deleteData(s.id,s.is_archived),["prevent"]),class:k(["btn btn-sm",s.is_archived?"btn-outline-success":"btn-outline-danger"]),title:s.is_archived?"Архивтан қайтару":"Архивқа салу"},[t("i",{class:k(["fas me-1",s.is_archived?"fa-redo-alt":"fa-archive"])},null,2),o(" "+n(s.is_archived?"Архивтан қайтару":"Архивқа салу"),1)],10,Wt)])])])])]))),128))]),t("div",Xt,[u(w,{links:c.projects.links},null,8,["links"])])])]),_:1})],64)}const as=D(P,[["render",Yt]]);export{as as default};
