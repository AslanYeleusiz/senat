import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import{o as n,c as a,e as s,G as k,E as y,D as u,b as d,B as _,g as c,L as x,w as g,F as S,i as L,M as w,p as B,h as O,r as b}from"./app-df21bdc9.js";import{_ as C}from"./logo-c37a058e.js";const I={name:"ImageSelect",props:{options:Array,modelValue:[String,Number,Object]},data(){return{isOpen:!1}},computed:{selectedOption(){return this.options.find(e=>e.value===this.modelValue)||this.options[0]}},methods:{toggleDropdown(){this.isOpen=!this.isOpen},selectOption(e){this.$emit("update:modelValue",e.value),this.isOpen=!1}}},N={class:"relative w-64 p-2"},R={class:""},j=["src"],E={key:0,class:"absolute z-10 w-full bg-white border mt-1 rounded-md shadow"},T=["onClick"],A=["src"];function V(e,o,h,f,i,l){return n(),a("div",N,[s("div",{onClick:o[0]||(o[0]=(...t)=>l.toggleDropdown&&l.toggleDropdown(...t)),class:""},[s("div",R,[s("img",{src:l.selectedOption.image,alt:"",class:""},null,8,j)])]),i.isOpen?(n(),a("div",E,[(n(!0),a(k,null,y(h.options,t=>(n(),a("div",{key:t.value,onClick:r=>l.selectOption(t),class:"p-1 items"},[s("img",{src:t.image,alt:"",class:"w-6 h-6"},null,8,A)],8,T))),128))])):u("",!0)])}const D=m(I,[["render",V],["__scopeId","data-v-d4f3594c"]]),z={components:{ImageSelect:D},data(){return{locale:window.APP_LOCALE??"kk",options:[{value:"kk",image:"/images/kk.png"},{value:"ru",image:"/images/ru.png"},{value:"en",image:"/images/en.png"}]}},methods:{async setLocale(){try{await axios.post("/set-locale",{locale:this.locale}),location.reload()}catch(e){console.error("Error setting locale",e)}}},watch:{locale(){this.setLocale()}}},M={class:"main-header navbar navbar-expand navbar-white navbar-light"},U={class:"navbar-nav"},F=s("li",{class:"nav-item"},[s("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[s("i",{class:"fas fa-bars"})])],-1),P={class:"nav-item d-none d-sm-inline-block"},G=["href"],Q={class:"navbar-nav ml-auto"},q={class:"nav-item"},H=s("li",{class:"nav-item"},[s("a",{class:"nav-link","data-widget":"fullscreen",href:"#",role:"button"},[s("i",{class:"fas fa-expand-arrows-alt"})])],-1);function J(e,o,h,f,i,l){const t=d("ImageSelect");return n(),a("nav",M,[s("ul",U,[F,s("li",P,[s("a",{href:e.route("admin.index"),class:"nav-link"},_(e.__("Басты бет")),9,G)])]),s("ul",Q,[s("li",q,[c(t,{modelValue:i.locale,"onUpdate:modelValue":o[0]||(o[0]=r=>i.locale=r),options:i.options},null,8,["modelValue","options"])]),H])])}const K=m(z,[["render",J]]);const W={components:{Link:x},data(){return{menu_items:[{name:this.__("Басты бет"),font:"fa-home",route_name:"admin.home.index",menu_active:["admin.home"],role:[1,2,3,4,5,6]},{name:this.__("Рөлдер тізімі"),font:"fa-user-shield",route_name:"admin.roles.index",menu_active:["admin.roles"],role:[1,2]},{name:this.__("Аудандар тізімі"),font:"fa-map-marker-alt",route_name:"admin.audans.index",menu_active:["admin.audans"],role:[1,2,4,5]},{name:this.__("Жоба түрлері"),font:"fa-bullhorn",route_name:"admin.projectTypes.index",menu_active:["admin.projectTypes"],role:[1,2]},{name:this.__("Қолданушылар тізімі"),font:"fa-users",route_name:"admin.users.index",menu_active:["admin.users"],role:[1,2,5]},{name:this.__("Жобалар"),font:"fa-briefcase",route_name:"admin.projects.index",menu_active:["admin.projects"],role:[1,2,3,4,6]},{name:this.__("Форум"),font:"fa-comment",route_name:"admin.forums.index",menu_active:["admin.forums"],role:[1,2,3,4,5,6,7]},{name:this.__("Хабарламалар"),font:"fa-comments",route_name:"admin.notifications.index",menu_active:["admin.notifications"],role:[1,2,3,4,5,6,7]},{name:this.__("Сұраныстар"),font:"fa-list",route_name:"admin.applications.index",menu_active:["admin.applications"],role:[1,7]}],ntfs:null}},created(){window.Echo.channel("take_notification_count_"+this.$page.props.user.id).listen(".take_notification_count",e=>{this.ntfs=e.ntfs_count_from_event})},mounted(){$('[data-widget="treeview"]').each(function(){adminlte.Treeview._jQueryInterface.call($(this),"init")}),this.loadNtfs()},methods:{async loadNtfs(){const e=await axios.get("/admin/get/ntfs-count");this.ntfs=e.data.ntfs_count?e.data.ntfs_count:null}},computed:{currentRoute(){let e=route().current().split(".");return e.pop(),e.join(".")},currentUserRole(){return this.$page.props.user.role_id}}},p=e=>(B("data-v-6db70e02"),e=e(),O(),e),X={class:"main-sidebar sidebar-light-purple bg-body-tertiary shadow"},Y={class:"sidebar-brand"},Z=p(()=>s("img",{src:C,alt:"AdminLTE Logo",class:"brand-image img-circle"},null,-1)),ee=p(()=>s("span",{class:"korinna"},"Turkistan Invest",-1)),se={class:"sidebar"},te={class:"user-panel mt-3 pb-3 mb-3 d-flex"},ne={class:"image"},ae={class:"info"},oe={class:"mt-2"},ie={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},re={key:0,class:"nav-item"},le={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},ce={class:"nav-item mt-4"},de=["href"],_e=p(()=>s("i",{class:"nav-icon fas fa-sign-out-alt"},null,-1)),ue=p(()=>s("p",null,"Шығу",-1)),me=[_e,ue];function he(e,o,h,f,i,l){const t=d("Link");return n(),a("aside",X,[s("div",Y,[c(t,{href:e.route("admin.index"),class:"brand-link"},{default:g(()=>[Z,ee]),_:1},8,["href"])]),s("div",se,[s("div",te,[s("div",ne,[s("div",{style:S(`background: url(${e.route("index")+"/storage/"+e.$page.props.user.avatar}); height: 34px; width: 34px; background-size: cover; background-position: center;`),class:"img-circle elevation-2"},null,4)]),s("div",ae,[c(t,{href:e.route("admin.profile.index"),class:"d-block"},{default:g(()=>[L(_(e.__("Жеке кабинет")),1)]),_:1},8,["href"])])]),s("nav",oe,[s("ul",ie,[(n(!0),a(k,null,y(i.menu_items,(r,v)=>(n(),a(k,{key:"menu_item"+v},[r.role.includes(l.currentUserRole)?(n(),a("li",re,[c(t,{href:e.route(r.route_name),class:w(["nav-link position-relative",{active:r.menu_active.includes(l.currentRoute)}])},{default:g(()=>[s("i",{class:w(["nav-icon fas",r.font])},null,2),s("p",null,_(r.name),1),r.name==e.__("Хабарламалар")?(n(),a("span",le,_(i.ntfs<100?i.ntfs:i.ntfs+"+"),1)):u("",!0)]),_:2},1032,["href","class"])])):u("",!0)],64))),128)),s("li",ce,[s("a",{class:"nav-link",href:e.route("admin.logout")},me,8,de)])])])])])}const pe=m(W,[["render",he],["__scopeId","data-v-6db70e02"]]),fe={},ve={key:0,class:"row justify-content-center pt-3"},ge={class:"col-md-11"},$e={class:"alert alert-danger",role:"alert"},be=s("button",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")],-1);function ke(e,o){return e.$page.props.flash.message?(n(),a("div",ve,[s("div",ge,[s("div",$e,[be,s("ul",null,[s("li",null,_(e.$page.props.flash.message),1)])])])])):u("",!0)}const we=m(fe,[["render",ke]]);const ye={components:{NavBar:K,SideBar:pe,ResultMessage:we},mounted(){this.init(),this.$watch(()=>this.$page.props.flash.success,e=>{e&&Swal.fire({icon:"success",title:"Сәтті орындалды",text:e,showConfirmButton:!1,timer:1500})}),this.$watch(()=>Object.keys(this.$page.props.errors),e=>{e.length&&Swal.fire({icon:"info",title:"Хабарлама!",text:this.$page.props.errors[e[0]],showConfirmButton:!0})})},computed:{headerSlot(){return!!this.$slots.header}},methods:{init(){let e=".preloader";setTimeout(()=>{let o=$(e);o&&(o.css("height",0),setTimeout(()=>{o.children().hide()},200))},2e3)}}},xe={class:"wrapper",style:{overflow:"auto"}},Se={class:"content-wrapper"},Le={class:"content-header"},Be={class:"container-fluid"},Oe={class:"content"},Ce={key:0,class:"container-fluid"},Ie={class:"row"},Ne={class:"col-12"},Re={class:"card"},je={class:"card-body"};function Ee(e,o,h,f,i,l){const t=d("NavBar"),r=d("SideBar"),v=d("ResultMessage");return n(),a("div",xe,[c(t),c(r),s("div",Se,[c(v),s("div",Le,[s("div",Be,[b(e.$slots,"breadcrumbs")])]),s("section",Oe,[l.headerSlot?(n(),a("div",Ce,[s("div",Ie,[s("div",Ne,[s("div",Re,[s("div",je,[b(e.$slots,"header")])])])])])):u("",!0),b(e.$slots,"default")])])])}const De=m(ye,[["render",Ee]]);export{De as A};
